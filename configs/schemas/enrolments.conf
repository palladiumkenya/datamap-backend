{"base_repository": "enrolments", "query": "select i.siteCode                                          AS FacilityID,\n      CONCAT(i.siteCode, p.patient_id)                    AS ClientID,\n      p.program                                           AS EpisodeOfCare,\n      CASE p.program           WHEN 'HIV' THEN d.unique_patient_no\n      WHEN 'MCH-Mother Services' THEN d.patient_clinic_number\n      WHEN 'MCH-Child Services' THEN d.cwc_number\n      WHEN 'TPT' THEN d.openmrs_id\n      WHEN 'OVC' THEN d.CPIMS_unique_identifier\n      WHEN 'OTZ' THEN d.openmrs_id\n      WHEN 'TB' THEN COALESCE(d.district_reg_no, d.Tb_no)\n      WHEN 'PrEP' THEN d.unique_prep_number           WHEN 'KVP' THEN d.openmrs_id\n      WHEN 'VMMC' THEN d.openmrs_id           WHEN 'MAT' THEN d.openmrs_id\n      WHEN 'NCD' THEN d.openmrs_id           WHEN 'CPM' THEN d.openmrs_id\n      WHEN 'Violence screening' THEN d.openmrs_id END AS EpisodeOfCareIdentifier,\n      p.date_enrolled                                     AS EnrollmentDate\n\n      from dwapi_etl.etl_patient_program p\n      INNER JOIN dwapi_etl.etl_patient_demographics d on p.patient_id = d.patient_id\n      JOIN kenyaemr_etl.etl_default_facility_info i\n      where p.date_completed is null;\n      ", "mappings": [{"id": "b98fcde8-51fc-11f0-8f2a-00090faa0001", "base_repository": "enrolments", "base_variable_mapped_to": "FacilityID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:36:42.952580", "updated_at": "2025-06-25 22:36:42.952580"}, {"id": "b98fcde9-51fc-11f0-bab4-00090faa0001", "base_repository": "enrolments", "base_variable_mapped_to": "ClientID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:36:42.952580", "updated_at": "2025-06-25 22:36:42.952580"}, {"id": "b98fcdea-51fc-11f0-8b6a-00090faa0001", "base_repository": "enrolments", "base_variable_mapped_to": "EpisodeOfCare", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:36:42.952580", "updated_at": "2025-06-25 22:36:42.952580"}, {"id": "b98fcdeb-51fc-11f0-b450-00090faa0001", "base_repository": "enrolments", "base_variable_mapped_to": "EpisodeOfCareIdentifier", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:36:42.952580", "updated_at": "2025-06-25 22:36:42.952580"}, {"id": "b98fcdec-51fc-11f0-a266-00090faa0001", "base_repository": "enrolments", "base_variable_mapped_to": "EnrollmentDate", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:36:42.952580", "updated_at": "2025-06-25 22:36:42.952580"}]}