{"base_repository": "lab", "query": "SELECT CONCAT(i.siteCode, x.patient_id) AS ClientID,\n       '' AS ProgramID,\n       i.siteCode AS FacilityID,     \n       x.date_test_requested AS OrderDate,\n       x.order_test_name AS TestName,\n       x.date_test_result_received AS ReportDate,\n       x.result_name AS TestResult,\n       x.encounter_id                   AS EncounterID,\n       CASE x.order_reason\n           WHEN 1040 THEN 'Initial PCR (6week or first contact)'\n           WHEN 1259 THEN 'Single drug substitution'\n           WHEN 1326 THEN '2nd PCR (6 months)'\n           WHEN 1434 THEN 'Currently pregnant'\n           WHEN 159882 THEN 'Breastfeeding'\n           WHEN 160032 THEN 'Confirmation of persistent low level viremia (PLLV)'\n           WHEN 160740 THEN 'Return to care after Interrupting treatment for >3months'\n           WHEN 161236 THEN 'Routine'\n           WHEN 162080 THEN 'Baseline VL (for infants diagnsed through EID)'\n           WHEN 162082 THEN 'Confirmatory PCR and Baseline VL'\n           WHEN 163523 THEN 'Clinical failure'\n           WHEN 164460 THEN 'Ab test 6 weeks after cessation of breastfeeding'\n           WHEN 164860 THEN 'Ab test at 18 months (1.5 years)'\n           WHEN 167387 THEN 'Suspected treatment failure'\n           WHEN 167390 THEN 'Baseline'\n           WHEN 167527 THEN 'Patient on fluconazole maintenance therapy'\n           WHEN 2001237 THEN 'PMTCT-KP'\n           WHEN 843 THEN 'Confirmation of treatment failure (repeat VL)'\n           WHEN 844 THEN 'HIV DNA Polymerase Chain Reaction, Qualitative'\n       END AS LabReason FROM dwapi_etl.etl_laboratory_extract x\nJOIN kenyaemr_etl.etl_default_facility_info i\n", "mappings": [{"id": "4c767ed3-51fb-11f0-a5f9-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "TestResult", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed4-51fb-11f0-b345-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "ProgramID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed5-51fb-11f0-b532-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "TestName", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed6-51fb-11f0-b96f-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "ReportDate", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed7-51fb-11f0-83a3-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "LabReason", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed8-51fb-11f0-8e52-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "ClientID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767ed9-51fb-11f0-a7d1-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "FacilityID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767eda-51fb-11f0-bcd9-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "OrderDate", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}, {"id": "4c767edb-51fb-11f0-8d5d-00090faa0001", "base_repository": "lab", "base_variable_mapped_to": "EncounterID", "tablename": "-", "columnname": "-", "datatype": "-", "join_by": "-", "created_at": "2025-06-25 22:15:23.593322", "updated_at": "2025-06-25 22:15:23.593322"}]}